module_name: H-Bridge DRV8701 Driver

serial_config:
    - command: h_bridge start
      port_config_param:
        name: TEL_FRSKY_CONFIG
        group: Serial

parameters:
    - group: H-Bridge DRV8701
      definitions:
        HBRDG_PWM_FREQ:
            description:
                short: H-Bridge DRV8701 PWM frequency
                long: |
                    PWM frequency for motor control in Hz.
                    Higher frequencies reduce motor noise but increase switching losses.
            type: int32
            unit: Hz
            min: 1000
            max: 100000
            default: 25000
            decimal: 0
            increment: 1000

        HBRDG_UPDATE_RT:
            description:
                short: H-Bridge DRV8701 update rate
                long: |
                    Control loop update rate in Hz.
                    Higher rates provide better control responsiveness.
            type: int32
            unit: Hz
            min: 50
            max: 1000
            default: 200
            decimal: 0
            increment: 10

        HBRDG_PWM_CH0:
            description:
                short: H-Bridge Channel 0 PWM output
                long: |
                    PWM channel number for motor channel 0.
                    Must correspond to a valid PWM output on the flight controller.
            type: int32
            min: 0
            max: 15
            default: 0
            decimal: 0
            increment: 1

        HBRDG_PWM_CH1:
            description:
                short: H-Bridge Channel 1 PWM output
                long: |
                    PWM channel number for motor channel 1.
                    Must correspond to a valid PWM output on the flight controller.
            type: int32
            min: 0
            max: 15
            default: 1
            decimal: 0
            increment: 1

        HBRDG_GPIO_EN:
            description:
                short: H-Bridge Enable GPIO pin
                long: |
                    GPIO pin number for shared enable signal.
                    This pin controls the enable signal for both H-Bridge chips.
            type: int32
            min: 0
            max: 255
            default: 100
            decimal: 0
            increment: 1

        HBRDG_GPIO_DIR0:
            description:
                short: H-Bridge Channel 0 Direction GPIO pin
                long: |
                    GPIO pin number for channel 0 direction control.
                    Controls the direction of motor channel 0.
            type: int32
            min: 0
            max: 255
            default: 101
            decimal: 0
            increment: 1

        HBRDG_GPIO_DIR1:
            description:
                short: H-Bridge Channel 1 Direction GPIO pin
                long: |
                    GPIO pin number for channel 1 direction control.
                    Controls the direction of motor channel 1.
            type: int32
            min: 0
            max: 255
            default: 102
            decimal: 0
            increment: 1

        HBRDG_GPIO_FLT0:
            description:
                short: H-Bridge Channel 0 Fault GPIO pin
                long: |
                    GPIO pin number for channel 0 fault monitoring.
                    Monitors fault status of H-Bridge chip 0.
            type: int32
            min: 0
            max: 255
            default: 103
            decimal: 0
            increment: 1

        HBRDG_GPIO_FLT1:
            description:
                short: H-Bridge Channel 1 Fault GPIO pin
                long: |
                    GPIO pin number for channel 1 fault monitoring.
                    Monitors fault status of H-Bridge chip 1.
            type: int32
            min: 0
            max: 255
            default: 104
            decimal: 0
            increment: 1

        HBRDG_CH0_LM_MIN:
            description:
                short: H-Bridge Channel 0 Minimum Limit Sensor Instance
                long: |
                    Limit sensor instance for channel 0 minimum position limit.
                    Set to 255 to disable limit checking.
            type: int32
            min: 0
            max: 255
            default: 255
            decimal: 0
            increment: 1

        HBRDG_CH0_LM_MAX:
            description:
                short: H-Bridge Channel 0 Maximum Limit Sensor Instance
                long: |
                    Limit sensor instance for channel 0 maximum position limit.
                    Set to 255 to disable limit checking.
            type: int32
            min: 0
            max: 255
            default: 255
            decimal: 0
            increment: 1

        HBRDG_CH1_LM_MIN:
            description:
                short: H-Bridge Channel 1 Minimum Limit Sensor Instance
                long: |
                    Limit sensor instance for channel 1 minimum position limit.
                    Set to 255 to disable limit checking.
            type: int32
            min: 0
            max: 255
            default: 255
            decimal: 0
            increment: 1

        HBRDG_CH1_LM_MAX:
            description:
                short: H-Bridge Channel 1 Maximum Limit Sensor Instance
                long: |
                    Limit sensor instance for channel 1 maximum position limit.
                    Set to 255 to disable limit checking.
            type: int32
            min: 0
            max: 255
            default: 255
            decimal: 0
            increment: 1

        HBRDG_CH0_AL_MIN:
            description:
                short: H-Bridge Channel 0 Allow Into Min Limit
                long: |
                    Allow motion into minimum limit for channel 0.
                    Useful for zeroing operations.
            type: int32
            boolean: true
            default: 0

        HBRDG_CH0_AL_MAX:
            description:
                short: H-Bridge Channel 0 Allow Into Max Limit
                long: |
                    Allow motion into maximum limit for channel 0.
                    Useful for calibration operations.
            type: int32
            boolean: true
            default: 0

        HBRDG_CH1_AL_MIN:
            description:
                short: H-Bridge Channel 1 Allow Into Min Limit
                long: |
                    Allow motion into minimum limit for channel 1.
                    Useful for zeroing operations.
            type: int32
            boolean: true
            default: 0

        HBRDG_CH1_AL_MAX:
            description:
                short: H-Bridge Channel 1 Allow Into Max Limit
                long: |
                    Allow motion into maximum limit for channel 1.
                    Useful for calibration operations.
            type: int32
            boolean: true
            default: 0
